<div *ngIf="isObjectEmpty(userInfo); else content" class="loading-container">
  <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
</div>

<ng-template #content>
  <div class="profile-container">
    <div class="profile-header">
      <img [src]="getAvatarUrl()" alt="Profile Picture" class="profile-picture" />
      <h2>{{ userInfo['userName'] }}</h2>
      <p class="membership-status">{{ userInfo['membershipStatus'] }}</p>
    </div>

    <div class="profile-details">
      <!-- Username Field -->
      <div class="detail-row">
        <p class="detail-label" *ngIf="!isEditing">Name:</p>
        <mat-form-field appearance="outline" class="input-field" *ngIf="isEditing">
          <mat-label>Name</mat-label>
          <input matInput [(ngModel)]="userInfo['userName']" />
        </mat-form-field>
        <p *ngIf="!isEditing" class="detail-value">{{ userInfo['userName'] }}</p>
      </div>

      <!-- Email Field (Non-editable, gray background when editing) -->
      <div class="detail-row">
        <p class="detail-label" *ngIf="!isEditing">Email:</p>
        <mat-form-field appearance="outline" class="input-field" *ngIf="isEditing">
          <mat-label>Email</mat-label>
          <input matInput [value]="userInfo['email']" readonly class="non-editable-email" />
        </mat-form-field>
        <p *ngIf="!isEditing" class="detail-value">{{ userInfo['email'] }}</p>
      </div>

      <!-- Phone Field -->
      <div class="detail-row">
        <p class="detail-label" *ngIf="!isEditing">Phone:</p>
        <mat-form-field appearance="outline" class="input-field" *ngIf="isEditing">
          <mat-label>Phone</mat-label>
          <input matInput [(ngModel)]="userInfo['phone']" />
        </mat-form-field>
        <p *ngIf="!isEditing" class="detail-value">{{ userInfo['phone'] }}</p>
      </div>
    </div>

    <!-- Edit/Save Button -->
    <button mat-button class="edit-button" (click)="toggleEdit()">
      {{ isEditing ? 'Save' : 'Edit' }}
    </button>
  </div>
</ng-template>